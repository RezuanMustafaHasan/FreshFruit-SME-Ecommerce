<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('partials/head') %>
</head>
<body>
    <%- include('partials/nav') %>
    
    <!-- Shop Hero Section -->
    <section class="hero-section">
        <div class="hero-overlay">
            <div class="container">
                <div class="row align-items-center" style="min-height: 60vh;">
                    <div class="col-lg-8 mx-auto text-center">
                        <div class="hero-content text-white">
                            <h1 class="display-2 fw-bold mb-4 animate-fade-in">
                                Our <span class="text-warning">Fresh</span><br>
                                Fruit Collection
                            </h1>
                            <p class="lead mb-4 fs-5">Discover our premium selection of farm-fresh, organic fruits. Each piece handpicked for quality and freshness!</p>
                            <div class="d-flex gap-3 flex-wrap justify-content-center">
                                <button class="btn btn-warning btn-lg px-4 py-3 rounded-pill shadow-lg">
                                    <i class="fas fa-filter me-2"></i>Filter Products
                                </button>
                                <button class="btn btn-outline-light btn-lg px-4 py-3 rounded-pill">
                                    <i class="fas fa-sort me-2"></i>Sort by Price
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    
    <!-- Products Grid Section -->
    <section class="py-5">
        <div class="container">
            <div class="products-list-card">
                <div class="products-grid">
                    <% if (allProducts && allProducts.length > 0) { %>
                        <% for (let product of allProducts) { %>
                            <div class="product-item">
                                <div class="product-image">
                                    <img src="<%= product.image && product.image.url ? product.image.url : '/images/placeholder.jpg' %>" alt="<%= product.name %>">
                                    <!-- <div class="product-overlay">
                                        <button class="btn btn-light btn-sm rounded-circle quick-view-btn">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div> -->
                                </div>
                                <div class="product-info">
                                    <h6 class="product-name"><%= product.name %></h6>
                                    <p class="product-description"><%= product.description %></p>
                                    <div class="product-details">
                                        <span class="product-price">&#2547;<%= product.price %> / <%=product.unit%></span>
                                        <span class="product-stock <%= product.stock > 10 ? 'in-stock' : product.stock > 0 ? 'low-stock' : 'out-of-stock' %>">
                                            <%= product.stock %> in stock
                                        </span>
                                    </div>
                                    <div class="product-meta">
                                        <span class="product-category badge bg-primary"><%= product.category %></span>
                                    </div>
                                    <div class="product-actions mt-3">
                                        <form action="/cart/add/<%= product._id %>" method="GET" class="d-inline w-100">
                                            <button type="submit" class="btn btn-success add-to-cart-btn w-100" <%= product.stock <= 0 ? 'disabled' : '' %>>
                                                <i class="fas fa-cart-plus me-2"></i>
                                                <%= product.stock <= 0 ? 'Out of Stock' : 'Add to Cart' %>
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        <% } %>
                    <% } else { %>
                        <div class="col-12 text-center py-5">
                            <div class="no-products">
                                <i class="fas fa-box-open fa-4x text-muted mb-3"></i>
                                <h4 class="text-muted">No Products Available</h4>
                                <p class="text-muted">Check back later for new arrivals!</p>
                            </div>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
    </section>

    

    <%- include('partials/footer') %>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript for Shop functionality -->
    <script>
        // Add to cart functionality
        document.querySelectorAll('.add-to-cart-btn').forEach(button => {
            button.addEventListener('click', function() {
                // Add animation
                this.innerHTML = '<i class="fas fa-check me-2"></i>Added!';
                this.classList.add('btn-warning');
                this.classList.remove('btn-success');
                
                setTimeout(() => {
                    this.innerHTML = '<i class="fas fa-cart-plus me-2"></i>Add to Cart';
                    this.classList.add('btn-success');
                    this.classList.remove('btn-warning');
                }, 2000);
            });
        });

        // Quick view functionality
        document.querySelectorAll('.quick-view-btn').forEach(button => {
            button.addEventListener('click', function() {
                alert('Quick view feature coming soon!');
            });
        });
    </script>
</body>
</html>